function Graph(t,e,r){var n=e,i=r;this.addNode=function(t,e){l.push({id:t,group:e}),f()},this.removeNode=function(t){for(var e=0,r=a(t);e<d.length;)d[e].source==r||d[e].target==r?d.splice(e,1):e++;l.splice(o(t),1),f()},this.removeLink=function(t,e){for(var r=0;r<d.length;r++)if(d[r].source.id==t&&d[r].target.id==e){d.splice(r,1);break}f()},this.removeAllLinks=function(){d.splice(0,d.length),f()},this.removeAllNodes=function(){l.splice(0,l.length),f()},this.addLink=function(t,e,r){d.push({source:a(t),target:a(e),value:r}),f()};var a=function(t){for(var e in l)if(l[e].id===t)return l[e]},o=function(t){for(var e=0;e<l.length;e++)if(l[e].id==t)return e},c=d3.select(t).append("svg:svg").attr("width",n).attr("height",i).attr("id","svg").attr("pointer-events","all").attr("viewBox","0 0 "+n+" "+i).attr("perserveAspectRatio","xMinYMid").append("svg:g"),s=d3.layout.force(),u=d3.scale.category20(),l=s.nodes(),d=s.links(),f=function(){var t=c.selectAll("line").data(d,function(t){return t.source.id+"-"+t.target.id});t.enter().insert("line",":first-child").attr("id",function(t){return t.source.id+"-"+t.target.id}).attr("class","link"),t.exit().remove();var e=c.selectAll("circle").data(l,function(t){return t.id});e.enter().append("svg:circle").attr("class","node").attr("id",function(t){return"Node;"+t.id}).call(s.drag);e.exit().remove(),s.on("tick",function(){e.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),t.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y})}),s.size([n,i]).start(),c.selectAll("circle.node").attr("r",function(t){return Math.max(1,1+2*Math.log(t.weight))}).style("fill",function(t){return u(t.weight)})};f()}